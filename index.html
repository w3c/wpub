<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>Web Publications</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove" defer="defer"></script>
		<script src="common/js/biblio.js" class="remove"></script>
		<link href="common/css/common.css" rel="stylesheet" type="text/css" />
		<script class="remove">
		  // <![CDATA[
          var respecConfig = {
              wg: "Publishing Working Group",
              specStatus: "ED",
              shortName: "wpub",
            //   edDraftURI: "https://w3c.github.io/wpub/",
              editors: [
                  {
      			      "name": "Matt Garrish",
                      "company": "DAISY Consortium",
                      "companyURL": "http://www.daisy.org",
                      "w3cid": 51655
                  },
                  {
                    "name": "Ivan Herman",
                    "url": "https://www.w3.org/People/Ivan/",
                    "company": "W3C",
					"w3cid": 7382,
                    "extras": [
                    {
                      "name": "<img src='common/images/orcid_logo.png' alt='orcid logo'/>",
                      "href": "http://orcid.org/0000-0003-0782-2704",
                      "class": "orcid"
                    }],
                    "companyURL": "http://www.w3.org",
                  }
              ],
			  authors: [
			      {
                    "name": "Baldur Bjarnason",
                    "company": "The Rebus Foundation",
                    "companyURL": "http://reb.us/",
					"w3cid": 92101
                  },
			  	  {
                    "name": "Timothy W. Cole",
                    "url": "http://www.library.illinois.edu/people/bios/t-cole3/",
                    "company": "University of Illinois at Urbana-Champaign",
                    "companyURL": "http://illinois.edu",
					"w3cid": 53965,
                    "extras": [
                      {
                        "name": "<img src='common/images/orcid_logo.png' alt='orcid logo'/>",
                        "href": "https://orcid.org/0000-0002-5906-4581",
                        "class": "orcid"
                      }]
                  },
			  ],
			  
              processVersion: 2017,
              includePermalinks: true,
              permalinkEdge:     true,
              permalinkHide:     false,
              diffTool:          "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
              wgURI:             "https://www.w3.org/publishing/groups/publ-wg/",
              wgPublicList:      "public-publ-wg",
              wgPatentURI:       "https://www.w3.org/2004/01/pp-impl/100074/status",
			  github:			 {
				  repoURL: "https://github.com/w3c/wpub",
				  branch: "master"

			  },
            //   otherLinks: [
            //       {
            //         key: "Repository",
            //         data: [{
            //             value: "Github Repository",
            //             href: "https://github.com/w3c/wpub"
            //         }]
            //       },
            //       {
            //         key: "Changes",
            //         data: [
            //         // {
            //         //   value: "Diff to previous version",
            //         //   href: "diff.html"
            //         // },
            //         {
            //           value: "Commit history",
            //           href: "https://github.com/w3c/wpub/commits/master"
            //         }]
            //       }
            //   ],
              localBiblio: biblio
          };
          // ]]>
      </script>
	</head>
	<body>
		<section id="abstract">
			<p>This specification defines a collection of information that describes the structure of Web Publications, 
			so that user agents or developers may create user experiences well-suited to reading publications, 
			such as sequential navigation and offline reading.
			This information includes the default reading order, a list of resources, 
			and publication-wide metadata.</p>
		</section>
		<section id="sotd">
			<p>This first public working draft provides a preliminary outline of a Web Publication. Many details are under
				active consideration within the Publishing Working Group and are subject to change. The most prominent known
				issues have been identified in this document and links provided to comment on them.</p>

			<p>In particular, the Working Group seeks feedback on the following issues:</p>
			<ul>
				<li>...</li>
			</ul>
		</section>
		<section id="intro">
			<h2>Introduction</h2>

			<section id="background" class="informative">
				<h3>Background</h3>

				<p>For millenia now, the written word has been the primary means of encoding and sharing ideas and
					information. The publication as a bounded edition, made public, has been used to carry intellectual and
					artistic works of innumerable form: novels, plays, poetry, journals, magazines, newspapers, articles,
					laws, treatises, pamphlets, atlases, comics, manga, notebooks, memos, manuals, and albums of all
					sorts.</p>

				<p>More recently, with the advent of the information age, print has been ceding ground to digital, and the
					Web has become a major forum for the public dissemination of ideas. But the Web is unbounded: information
					and resources are only loosely connected through hyperlinks. While this model has helped the Web thrive
					in many areas, it has proven problematic for traditional information publishing—users often cannot access
					works in their entirety, especially when offline, and have not been able to easily access, compile and
					download content for curation and personal use. That, in turn, has fed the continuing development of
					non-Web document formats to redress these problems, and made it necessary to create both Web-ready
					content and alternative offline renditions to ensure publications are fully available.</p>

				<p>This specification aims to reduce these barriers and reinvigorate publishing by combining the best aspects
					of both models—the persistent availability and portability of bounded publications with the pervasive
					accessibility, addressability, and interconnectedness of the Open Web Platform.</p>
			</section>

			<section id="scope" class="informative">
				<h3>Scope</h3>

				<p>This specification only defines requirements for the production and rendering of valid <a>Web
						Publications</a>. As much as possible, it leverages existing Open Web Platform technologies to
					achieve its goal—that being to allow for a measure of boundedness on the Web without changing the way
					that the Web itself operates.</p>

				<p>Moreover, the specification is designed to adapt automatically to updates to Open Web Platform
					technologies in order to ensure that Web Publications continue to interoperate seamlessly as the Web
					evolves (e.g., by referencing the latest published versions instead of specific versions).</p>

				<p>Further, this specification does not attempt to constrain the nature of a Web Publication: any type of
					work that can be represented on the Web constitutes a potential Web Publication.</p>
			</section>

			<!-- <section id="nature">
				<h3>Web Publications</h3>

				<p>The act of publishing involves obtaining resources, organizing them into a publication and making that
					publication available on a Web server. In doing so, the publisher establishes the interconnectedness that
					binds the resources into a single work. This process also provides an origin for the Web Publication and
					a URL that uniquely identifies it, giving provenance to the work.</p>

				<p>The establishment of this discoverable and identifiable collection is what enables users to access their
					content without concern for whether they are online or offline. The user agent can cache the resources
					ensuring that the Web Publication is available and functional while offline, providing the user, as much
					as possible, a seamless experience interacting with a Web Publication regardless of their network
					connection.</p>

				<p>The Web Publication introduces the concept of a manifest, which serves to carry information about the
					constituent resources of the publication. The manifest includes metadata that describes the publication
					as a whole, as it has an identity and nature beyond its constituent resources. The metadata and manifest
					also incorporate information about the sequence and presentation of the content.</p>

				<p>A Web Publication also provides a default ordering of its primary constituent resources, although that
					order may be changed by user interaction or scripting. The user is able to access any primary resource
					directly via navigation provided by the publication itself or via the user agent.</p>
			</section> -->

			<section id="terminology">
				<h3>Terminology</h3>

				<p>Wherever appropriate, this document relies on terminology defined by the note on "Publishing and Linking
					on the Web" [[!publishing-linking]], including, in particular, <a class="externalDFN"
						href="https://www.w3.org/TR/publishing-linking/#dfn-user">user</a>, <a class="externalDFN"
						href="https://www.w3.org/TR/publishing-linking/#dfn-user-agent">user agent</a>, <a
						class="externalDFN" href="https://www.w3.org/TR/publishing-linking/#dfn-browser">browser</a>, and <a
						class="externalDFN" href="https://www.w3.org/TR/publishing-linking/#dfn-address">address</a>.</p>

				<dl>
					<dt><dfn>Identifier</dfn></dt>
					<dd>
						<p>An identifier is metadata that can be used to refer to <a class="externalDFN"
								href="https://www.w3.org/TR/publishing-linking/#dfn-web-content">Web Content</a> in a
							persistent and unambiguous manner. URLs, URNs, DOIs, ISBNs, or PURLs are all examples of
							persistent identifiers frequently used in publishing.</p>
					</dd>

					<dt><dfn data-lt="Manifests">Manifest</dfn></dt>
					<dd>
						<p>A manifest represents structured information about a <a>Web Publication</a>, such as informative
							metadata, a <a href="#wp-resources">list of all resources</a>, and a <a>default reading
							order</a>.</p>
					</dd>

					<dt><dfn>Non-empty</dfn></dt>
					<dd>
						<p>For the purposes of this specification, non-empty is used to refer to an element, attribute or
							property whose text content or value consists of one or more characters after whitespace
							normalization, where whitespace normalization rules are defined per the host format.</p>
					</dd>

					<dt><dfn>URL</dfn></dt>
					<dd>
						<p>In this specification, the general term URL is used as in other W3C specifications like
							HTML&#160;[[!html]], and is defined by URL Standard of the WhatWG&#160;[[!url]]. In particular,
							such a URL allows for the usage of characters from Unicode following&#160;[[!rfc3987]]. See <a
								href="https://www.w3.org/TR/html/references.html#biblio-url">the note in the HTML5
								document</a> for further details.</p>
					</dd>

					<dt><dfn data-lt="Web Publications|Web Publication's">Web Publication</dfn></dt>
					<dd>
						<p>A Web Publication is a collection of one or more resources, organized together through a
								<a>manifest</a> into a single logical work with a <a>default reading order</a>. The Web
							Publication is uniquely identifiable and presentable using Open Web Platform technologies.</p>
					</dd>
				</dl>
			</section>
		</section>
		<section id="conformance">
			<section>
				<h2>Conformance Classes</h2>

				<p>This specification defines two conformance classes: one for <a>Web Publications</a> and one for user
					agents that process them.</p>

				<p id="wp-conformance">A Web Publication is conformant to this specification if it meets the following
					criteria:</p>

				<ul>
					<li>It MUST have a <a>manifest</a> that conforms to <a href="#manifest-req"></a>.</li>
				</ul>

				<p id="ua-conformance">A user agent is conformant to this specification if it meets the following
					criteria:</p>

				<ul>
					<li>It MUST be capable of generating a conforming <a href="#infoset">infoset</a> for a Web
						Publication.</li>
				</ul>
			</section>
		</section>
		<section id="infoset">
			<h2>Information Set</h2>

			<p class="ednote">The name "infoset" may change depending on feedback. Although this term has a different meaning
				for individuals familiar with XML, alternatives such as "properties" and "metadata" do not fully capture the
				nature or purpose. See <a href="https://github.com/w3c/wpub/issues/63">issue #63</a> for discussion.</p>

			<section id="infoset-expl">
				<h3>Explanation</h3>

				<p>A Web Publication is defined by a set of properties known as its <dfn data-lt="infoset">information
						set</dfn> (infoset). The infoset is both abstract and concrete. It is abstract in the sense that it
					represents a set of information that a user agent has to be able to compile about the Web Publication,
					but it also becomes concrete when the user agent creates an internal representation of the
					information.</p>

				<p>The infoset does not require a specific serialization. It is primarily compiled from a Web Publication's
						<a>manifest</a>, whose serialization requirements are defined in <a href="#manifest-serialization"
					></a>. It is therefore possible to express the same infoset via different manifests, although a Web
					Publication will only have one manifest.</p>

				<p>Although the manifest is the primary source of the infoset, some information may be obtained independent
					of it. For example, fallback rules for properties defined in the following subsections allow a user agent
					to compile information that the author has not provided in the manifest, whether as an intentional
					optimization or by accidental omission.</p>
			</section>

			<section id="infoset-req">
				<h3>Requirements</h3>

				<p>The Web Publication <a>infoset</a> MUST include the following information:</p>

				<ul>
					<li>The <a href="#wp-address">address</a> of the Web Publication.</li>
					<li>The <a href="#wp-resources">Web Publication resources</a>.</li>
					<li>The <a href="#wp-default-reading-order">default reading order</a> of the Web Publication.</li>
				</ul>

				<p>In addition, the infoset SHOULD include the following information:</p>

				<ul>
					<li>The <a href="#wp-title">title</a> (or "name") of the Web Publication.</li>
					<li>The <a href="#wp-language">default (natural) language</a> of the Web Publication.</li>
					<li>A <a href="#wp-canonical-identifier">canonical identifier</a>.</li>
					<li>The <a href="#wp-table-of-contents">table of contents</a>.</li>
				</ul>

				<p class="ednote">These requirements reflect the current minimum consensus, though a number of issues remain
					open that could change whether an item is required or recommended. See the following sections for more
					information.</p>

				<p class="issue" data-number="21">Whether the minimum manifest must include any metadata, or a specific slot
					to handle metadata. (Note: this is now more specifically related to the infoset.)</p>
			</section>

			<section id="wp-title">
				<h3>Title</h3>

				<p>The title provides the human-readable name of the Web Publication.</p>

				<p>When specified in the manifest, the title MUST be <a>non-empty</a>.</p>

				<p>If a user agent requires a title and one is not available in the <a>infoset</a>, it MAY create one. This
					specification does not mandate how such a title is created. The user agent might:</p>

				<ul>
					<li>use the first <a>non-empty</a>
						<code>title</code> element found in the <a>default reading order</a>;</li>
					<li>provide a language-specific placeholder title (e.g., 'Untitled Publication');</li>
					<li>use the URL of the manifest;</li>
					<li>calculate a title using its own algorithm.</li>
				</ul>

				<div class="note">
					<p>A user agent is not expected to produce a <a
							href="https://www.w3.org/TR/WCAG20/#navigation-mechanisms-title">meaningful title</a> [[WCAG20]]
						for a Web Publication when one is not specified.</p>
				</div>
			</section>

			<section id="wp-language">
				<h3>Language</h3>

				<p>The language specified in the Web Publication's <a>infoset</a> identifies the natural language(s) of its
					content.</p>

				<p>This language is not used in the processing or rendering of the Web Publication (including the manifest),
					and is <strong>not</strong> a replacement for identifying the language of each resource as defined by its
					format. It instead allows a user agent to ability to provide supplementary enhancements, such as the
					ability to download a custom dictionary or the preload a language-specific text-to-speech module.</p>

				<p>When specified, the language MUST be a tag that conforms to [[!BCP47]].</p>

				<p>If a user agent requires the language and one is not available in the infoset, it MAY attempt to determine
					the language. This specification does not mandate how such a language tag is created. The user agent
					might:</p>

				<ul>
					<li>use the <a>non-empty</a> language declaration of the manifest;</li>
					<li>use the first non-empty language declaration found in the <a>default reading order</a>;</li>
					<li>calculate the language using its own algorithm.</li>
				</ul>

				<p>If a language tag cannot be determined, the value "<code>und</code>" (undetermined) MUST be used.</p>

				<div class="issue" data-number="53">
					<p>The question is whether the language declared for the manifest content is the same as the language of
						the publication, and how to deal with multilingual publications.</p>
				</div>
			</section>

			<section id="wp-canonical-identifier">
				<h3>Canonical Identifier</h3>

				<p>A <a>Web Publication's</a>
					<dfn>canonical identifier</dfn> is a unique identifier that resolves to the preferred version of the Web
					Publication. The canonical identifier SHOULD be an <a>address</a>, but, if not, it MUST be possible to
					make a one-to-one mapping to an address (e.g., a DOI can be resolved to a URL via a DOI resolver).</p>

				<p>If a Web Publication is hosted at more than one address, this identifier allows a user agent to identify
					the shared relationship between the versions and to determine which of the available addresses is
					primary.</p>

				<p>The canonical identifier is also intended to provide a measure of permanence above and beyond the Web
					Publication's address. Even if a Web Publication is permanently relocated to a new address, for example,
					the canonical identifier will provide a way of locating the new location (e.g., a DOI registry could be
					updated with the new URL, or a redirect could be added to the URL of the canonical identifier).</p>

				<p>When assigned, the canonical identifier needs to be unique to one and only one Web Publication,
					independent of its address(es). Ensuring uniqueness is outside the scope of this specification, however.
					The actual uniqueness achievable depends on such factors as the conventions of the identifier scheme used
					and the degree of control over assignment of identifiers.</p>

				<p class="note">If the canonical identifier is a URL, it can be used as the target of a "canonical"
					link&#160;[[!rfc6596]] (e.g., a [[html]] <code>link</code> element whose <code>rel</code> attribute has
					the value <code>canonical</code> or a Link HTTP header field [[rfc5988]] similarly identified).</p>

				<p class="issue" data-number="58">The question is whether a canonical identifier is necessary to call out
					explicitly in the infoset, or whether it is/can be handled by other metadata.</p>
			</section>

			<section id="wp-address">
				<h3>Address</h3>

				<p>A Web Publication's <dfn>address</dfn> is a <a>URL</a> that refers to a <a>Web Publication</a> and enables
					the retrieval of a representation of the <a>manifest</a> of the Web Publication.</p>

				<p>The availability of this address does not preclude the creation and use of other identifiers and/or
					addresses to retrieve a representation of a <a>Web Publication</a> in whole or part.</p>

				<div class="note">The Web Publication's address can also be used as value for an identifier link relation
					[[link-relation]].</div>
			</section>

			<section id="wp-resources">
				<h3>Resources</h3>

				<p>The <a>infoset</a> MUST include a list of the Web Publication's resources, although the list is not
					required to be exhaustive. Resources in the <a>default reading order</a> MUST be included in this
					list.</p>

				<p class="issue" data-number="22">The discussion led to the question whether the manifest/infoset MUST list
					all resources or not. In this sense, this became a duplicate of <a
						href="https://github.com/w3c/wpub/issues/23">issue #23</a> ended up at the same question.</p>

				<p class="issue" data-number="23">The question is whether the manifest/infoset MUST list all resources or
					not.</p>

				<p class="issue" data-number="59">The question is whether the manifest MUST list resources in the default
					reading order or whether this can be inferred.</p>
			</section>

			<section id="wp-default-reading-order">
				<h3>Default Reading Order</h3>

				<p>The <dfn>default reading order</dfn> is a specific progression through a set of Web Publication
					resources.</p>

				<p>A user might follow alternative pathways through the content, but in the absence of such interaction the
					default reading order defines the expected progression from one resource to the next.</p>

				<p>The default reading order MUST include at least one resource.</p>

				<p>The default reading order is either specified directly in the manifest or a link is provided to an
					[[!html]] <code>nav</code> element whose list of links are processed to create one.</p>

				<p>The process for extracting a default reading order from a <code>nav</code> element are as follows:</p>

				<ol>
					<li>extract a list of resource paths referenced from the <code>href</code> attribute of all
							<code>a</code> elements;</li>
					<li>strip any fragment identifiers from the references;</li>
					<li>resolve all relative paths to full URLs;</li>
					<li>remove all consecutive references to the same resource, leaving only the first.</li>
				</ol>

				<p>If a user agent requires a default reading order and one is not provided in the <a>infoset</a>, it MAY
					attempt to construct one. This specification does not mandate how such a default reading order is
					created. The user agent might:</p>

				<ul>
					<li>use only the resource the user accessed to reach the manifest;</li>
					<li>search the list of resources for a <code>nav</code> element to use;</li>
					<li>calculate the default reading order using its own algorithm.</li>
				</ul>

				<p class="issue" data-number="35">Define the default reading order of a Web Publication to be the files
					referenced in the first</p>
				<p class="issue" data-number="39">There is a consensus that a Web Publication must have a reading order and
					must/should have a table of contents (the main navigation entry point).</p>
			</section>

			<section id="wp-table-of-contents">
				<h3>Table of Contents</h3>

				<p>The table of contents provides access to major sections of the Web Publication. There are no requirements
					on the completeness of the table of contents, except that, when specified, it MUST link to at least one
					resource in the <a>default reading order</a>.</p>

				<p>The table of contents is either specified directly in the manifest or a link is provided to an [[!html]]
						<code>nav</code> element containing one.</p>

				<p>If a user agent requires a table of contents and one is not specified, it MAY construct one. This
					specification does not mandate how such a table of contents is created. The user agent might: </p>

				<ol>
					<li>attempt to locate a table of contents in the default reading order (e.g., an HTML document with a
							<code>nav</code> element that has the <code>role</code> attribute value
						<code>doc-toc</code>);</li>
					<li>use the titles of resources in the default reading order;</li>
					<li>calculate a table of contents using its own algorithms.</li>
				</ol>

				<p class="issue">This question arises only if this mechanism is accepted: the question is whether a table of
					contents navigation element can refer, via links, to any resource that is <em>not</em> listed in the
					default reading order.</p>

				<p class="ednote">The issue of using the HTML <code>nav</code> element as a possible encoding of the table of
					contents is mentioned or explicitly addressed in a number of issues listed below.</p>

				<p class="issue" data-number="35">Define the resources in the default reading order of a Web Publication to
					be the files referenced in the first</p>
				<p class="issue" data-number="39">There is a consensus that a Web Publication must have a reading order and
					must/should have a table of contents (the main navigation entry point).</p>
			</section>
			<section id="wp-metadata">
				<h3>Additional Metadata</h3>
				<p>In addition the stated requirements the Web Publication Infoset SHOULD also provide the following publication metadata:</p>
				<ul>
					<li>A list of creators and, optionally, their specific roles. E.g. 'author', 'publisher', 'editor', or 'translator'.</li>
					<li>Publication date</li>
					<li>Modification date</li>
					<li>Accessibility metadata</li>
				</ul>

				<p class="issue" data-number="66"></p>
				
				<p>Identifiers and modification dates are an important aid in the distribution and storage of portable formats (past, current, and present) so authors are urged to include this information whenever they can.</p>

				<p>The infoset MAY also provide:</p>

				<ul>
					<li>A subtitle</li>
					<li>Licensing information</li>
					<li>Intended audience</li>
					<li>General subject</li>
				</ul>

				<p>These items apply to the Web publication in its entirety. Metadata for individual content documents should be embedded in or linked from the content documents themselves.</p>

				<p>The Web Publication Infoset SHOULD NOT include complex, specialised, and industry-specific metadata and authors should limit the metadata included in the manifest to the items above.</p>

				<p>If the information set does not cover the publication's needs, authors should link to external metadata files in whichever formats and schema are most commonly accepted as the authoritative metadata format for their intended audiences. They can include multiple metadata links in multiple formats, one for each intended audience, if needed.</p>

				<p>User Agents MAY decide to support metadata extensions, other metadata schemes, or additional metadata properties if they so choose. User Agents must ignore metadata properties that they do not recognise.</p>

			</section>
		</section>
		<section id="manifest">
			<h2>Manifest</h2>

			<section id="manifest-intro" class="informative">
				<h3>Overview</h3>

				<p>A <a>manifest</a> is a specific serialization of a <a>Web Publication's</a>
					<a>infoset</a>.</p>
			</section>

			<section id="manifest-req">
				<h3>Requirements</h3>

				<p>The requirements for a conforming Web Publication manifest are as follows:</p>

				<ol>
					<li>It MUST <a href="#manifest-declaration">declare</a> that it describes a Web Publication.</li>
					<li>It MUST be serialized as defined in <a href="#manifest-serialization"></a>.</li>
				</ol>
			</section>

			<section id="manifest-declaration">
				<h3>Declaration</h3>

				<div class="ednote">Placeholder for how a manifest declares it describes a web publication.</div>
			</section>

			<section id="manifest-serialization">
				<h3>Serialization</h3>

				<p class="issue" data-number="25"></p>
				<p class="issue" data-number="26">Should the table of contents be a separate HTML file or is the listing of
					resources in the default reading order an implicit table of contents?</p>
				<p class="issue" data-number="32"></p>
			</section>

			<section id="manifest-linking">
				<h2>Linking to a Manifest</h2>

				<div class="ednote">Placeholder for how resources identify they belong to a publication.</div>
				
				<p class="note">This is adapted from the [[Web Application Manifest]] spec.</p>

				
				<p>A resource is said to be associated with a manifest if the resource 
				representation, an HTML document, has a manifest link relationship.</p>
				
				<p>To link to a manifest, use the [[HTML]] <code>link</code> element 
				using the keyword <code>manifest</code> as the value of the 
				<code>rel</code> attribute. This creates an external resource link:</p>
				
<div class="example">
<pre>
&lt;link rel="manifest" href="manifest.json"&gt;
</pre>
</div>
				
				<p class="note">In cases where more than one <code>link</code> element 
				with a manifest link type appears in a Document, the user agent 
				uses the first <code>link</code> element in tree order 
				and ignores all subsequent <code>link</code> element with a manifest 
				link type (even if the first element was erroneous). 
				See the steps for obtaining a manifest.</p>

				<p class="issue" data-number="13">If we have a collection of information about a web publication as a whole
					("manifest") that exists separately from most of the publication's resources, we need to find a way to
					associate the manifest with the other publication resources.</p>
			</section>

			<section id="manifest-linking-from">
				<h3>Linking <em>from</em> a Manifest</h3>

				<p>The manifest serialization MUST provide a general linking mechanism for defining a relationship between the Web Publication and other resources on the Web as well as the type of those relationships.</p>

				<p>This mechanism is used in to express many parts of the Web Publication's infoset, including but not limited to:</p>

				<ul>
					<li><a href="#wp-canonical-identifier">Canonical identifier</a> using the <code>rel='canonical'</code> link relation.&nbsp;[[rfc6596]]</li>
					<li><a href="#wp-table-of-contents">Table of Contents</a> in the cases where the ToC is specified as a link to an HTML nav element.</li>
					<li><a href="#wp-metadata">External metadata</a> that may be expressed in established vocabularies such as ONIX, MARC, schema.org, or Dublin Core.</li>
				</ul>

				<p class="ednote">There are some overlaps between this list and, e.g., the separate section on canonical identifiers.</p>

				<p>This linking mechanism may also be used to express other common link structures on the open Web. For example:</p>

				<ul>
					<li>Distribution feeds such as <a href="http://opds-spec.org/specs/opds-catalog-1-1">OPDS</a> or <a href="https://tools.ietf.org/html/rfc4287">Atom</a>&nbsp;[[rfc4287]]</li>

					<li>Alternate versions of the publication</li>
					<li><a href="https://www.w3.org/TR/webmention/">Web Mentions</a>&nbsp;[[webmention]]</li>
				</ul>

				<p class="note">Some of these link structures, such as dynamic search links, may require support for <a href="https://tools.ietf.org/html/rfc6570">URI templates</a>&nbsp;[[rfc6570]] to be meaningfully useful in the context of a Web Publications. User agents should(?) support URI templates in order to make it easier for publishers to integrate dynamic server-side features into their publications with minimal coding and effort.</p>

				<p class="issue" data-number="67"></p>
			</section>
		</section>
		<section id="lifecycle">
			<h2>Establishing a Web Publication</h2>

			<p class="issue" data-number="32">Need to determine intersection between web pubs and the lifecycle of a web
				app.</p>

			<section id="lifecyle-obtain-manifest">
				<h3>Obtaining the manifest</h3>
				
				<p class="note">This text is taken from the Web App Manifest spec</p>

				<p>To obtain a manifest, the user agent must run the steps for 
				obtaining a manifest. The appropriate time to obtain the manifest is 
				left up to implementations. A user agent may opt to delay fetching a manifest 
				until after the document and its other resources have been fully loaded
				 (i.e., to not delay the availability of content and scripts 
				 required by the document).</p>
				
				<p>A manifest is obtained and applied regardless of 
				the media attribute of the link element matches the environment or not.</p>
				
<p>
          The <dfn data-lt="obtaining the manifest|obtaining a manifest">steps
          for obtaining a manifest</dfn> are given by the following algorithm.
          The algorithm, if successful, returns a <a>processed manifest</a> and
          the <var>manifest URL</var>; otherwise, it terminates prematurely and
          returns nothing. In the case of nothing being returned, the user
          agent MUST ignore the manifest declaration. In running these steps, a
          user agent MUST NOT <a>delay the load event</a>.
        </p>
        <ol>
          <li>From the <code>Document</code> of the <a>top-level browsing
          context</a>, let <var>manifest link</var> be the first
          <a><code>link</code> element</a> in <a>tree order</a> whose <a><code>
            rel</code> attribute</a> contains the token <code>manifest</code>.
          </li>
          <li>If <var>manifest link</var> is <code>null</code>, terminate this
          algorithm.
          </li>
          <li>If <var>manifest link</var>'s <code>href</code> attribute's value
          is the empty string, then abort these steps.
          </li>
          <li>Let <var>manifest URL</var> be the result of <a>parsing</a> the
          value of the <code>href</code> attribute, relative to <a>the
          element's base URL</a>. If parsing fails, then abort these steps.
          </li>
          <li>Let <var>request</var> be a new [[!FETCH]] <a>request</a>, whose
          URL is <var>manifest URL</var>, and whose <a>context</a> is
          "<code>manifest</code>".
          </li>
          <li>If the <var>manifest link</var>'s <code>crossOrigin</code>
          attribute's value is '<code>use-credentials</code>', then set
          <var>request</var>'s credentials to '<code>include</code>'.
          </li>
          <li>Await the result of performing a <a>fetch</a> with
          <var>request</var>, letting <var>response</var> be the result.
          </li>
          <li>If <var>response</var> is a <a>network error</a>, terminate this
          algorithm.
          </li>
          <li>Let <var>text</var> be the result of <a>UTF-8 decoding</a> <var>
            response</var>'s <a data-cite=
            "!FETCH#concept-request-body">body</a>.
          </li>
          <li>Let <var>manifest</var> be the result of running the <a>steps for
          processing a manifest</a> with <var>text</var>, <var>manifest
          URL</var>, and the URL that represents the address of the
          <a>top-level browsing context</a>.
          </li>
          <li>Return <var>manifest</var> and <var>manifest URL</var>.
          </li>
        </ol>
			</section>

			<section id="lifecycle-process-manifest">
				<h3>Processing the manifest</h3>

				<p class="ednote">Placeholder for UA processing of manifest and creation of infoset.</p>
			</section>

			<section id="lifecycle-intiate-wp">
				<h3>Intiating the Web Publication</h3>

				<p class="ednote">Placeholder for UA initiating an enhanced reading experience.</p>
				<p>A manifest is applied to a top-level browsing context, 
				meaning that the members of the manifest are affecting the 
				presentation or behavior of a browsing context.</p>

				<p>A top-level browsing context that has a manifest applied to it 
				is referred to as an publication context.</p>

				<p>If an publication context is created as a result of the user agent 
				being asked to navigate to a deep link, the user agent must immediately 
				navigate to the deep link with replacement enabled. 
				Otherwise, when the publication context is created, 
				the user agent must immediately navigate to 
				the start_URL with replacement enabled.</p>
				
				<p class="issue">What is our analog to start url?</p>
			</section>

			<section id="lifecycle-update-wp">
				<h3>Updating the Web Publication</h3>

				<p class="ednote">Placeholder for UA updating manifest and/or WP content.</p>
			</section>
		</section>
		<section id="wp-enhancements">
			<h2>Reading Enhancements</h2>

			<p class="ednote">This section contains placholders for possible reading enhancements the UA may/should/must
				provide. The list is subject to addition, modification and removal as the enhancements get discussed in more
				detail.</p>

			<section id="enh-nav">
				<h3>Navigation</h3>
				
				<p>Users need to find their way around all the content in a web publication.
				 This involves everything from “turning the page” to finding 
				 a table of contents.</p>

				<section id="enh-reading-order">
					<h4>Reading Order</h4>

					<p>As mentioned above, A <a>web publication</a> must have a 
					<a href="#wp-default-reading-order">default reading order</a> 
					of primary resources. 
					A user agent must be able to render these resources in that order, 
					and must provide users with means to access the next and previous 
					document in that 
					<a href="#wp-default-reading-order">default reading order.</a></p>
					
					<p class="note">Fancier version: A user agent MUST provide a way 
					for the user to explicitly cause the <a>publication context</a> 
					to navigate to the next or previous document in the 
					<a>default reading order.</a> </p>
					
				</section>

				<section id="enh-toc">
					<h4>Table of Contents</h4>

					<p class="ednote">Placeholder for accessing a table of contents.</p>
					<p>A  <a href="#wp-table-of-contents">table of contents</a> helps users find the content they need. A <a>web publication</a> should have a navigation document, and if it does a conforming user agent must provide access to the links and labels of its nav elements in a way that allows to the user to activate the links.</p>
					
				</section>
			</section>

			<section id="enh-offline-reading">
				<h3>Offline Reading</h3>

				<p class="ednote">Placeholder for offline reading of a publication.</p>
			</section>

			<section id="enh-search">
				<h3>Search</h3>

				<p class="ednote">Placeholder for inter-publication search.</p>
			</section>

			<section id="enh-pagination">
				<h3>Pagination</h3>

				<p class="ednote">Placeholder for paginated reading experience.</p>
			</section>
		</section>
		<section id="security">
			<h2>Security</h2>

			<div class="ednote">Placeholder for security issues.</div>
		</section>
		<section id="privacy">
			<h2>Privacy</h2>

			<div class="ednote">Placeholder for privacy issues.</div>
		</section>
		<section id="ack" data-include="common/html/acknowledgements.html" data-include-replace="true"></section>
	</body>
</html>
