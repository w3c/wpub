<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>Web Publications</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove" defer="defer"></script>
		<script src="common/js/biblio.js" class="remove"></script>
		<link href="common/css/common.css" rel="stylesheet" type="text/css" />
		<script class="remove">
		  // <![CDATA[
          var respecConfig = {
              wg: "Publishing Working Group",
              specStatus: "ED",
              shortName: "wpub",
            //   edDraftURI: "https://w3c.github.io/wpub/",
              editors: [
                  {
      			      "name": "Matt Garrish",
                      "company": "DAISY Consortium",
                      "companyURL": "https://www.daisy.org",
                      "w3cid": 51655
                  },
                  {
                    "name": "Ivan Herman",
                    "url": "https://www.w3.org/People/Ivan/",
                    "company": "W3C",
					"w3cid": 7382,
                    "extras": [
                    {
                      "name": "<img src='common/images/orcid_logo.png' alt='orcid logo'/>",
                      "href": "http://orcid.org/0000-0003-0782-2704",
                      "class": "orcid"
                    }],
                    "companyURL": "https://www.w3.org",
                  }
              ],
			  authors: [
			      {
                    "name": "Baldur Bjarnason",
                    "company": "The Rebus Foundation",
                    "companyURL": "https://reb.us/",
					"w3cid": 92101
                  },
			  	  {
                    "name": "Timothy W. Cole",
                    "url": "https://www.library.illinois.edu/people/bios/t-cole3/",
                    "company": "University of Illinois at Urbana-Champaign",
                    "companyURL": "https://illinois.edu",
					"w3cid": 53965,
                    "extras": [
                      {
                        "name": "<img src='common/images/orcid_logo.png' alt='orcid logo'/>",
                        "href": "https://orcid.org/0000-0002-5906-4581",
                        "class": "orcid"
                      }]
                  },
			      {
                    "name": "Dave Cramer",
                    "company": "Hachette Livre",
                    "companyURL": "https://hachette.com/"
                  },
			      {
                    "name": "Florian Rivoal",
                    "company": "Vivliostyle Inc.",
                    "companyURL": "http://vivliostyle.com/"
                  }
			  ],
              processVersion: 2017,
              includePermalinks: true,
              permalinkEdge:     true,
              permalinkHide:     false,
              diffTool:          "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
              wgURI:             "https://www.w3.org/publishing/groups/publ-wg/",
              wgPublicList:      "public-publ-wg",
              wgPatentURI:       "https://www.w3.org/2004/01/pp-impl/100074/status",
			  github:			 {
				  repoURL: "https://github.com/w3c/wpub",
				  branch: "master"

			  },
            //   otherLinks: [
            //       {
            //         key: "Repository",
            //         data: [{
            //             value: "Github Repository",
            //             href: "https://github.com/w3c/wpub"
            //         }]
            //       },
            //       {
            //         key: "Changes",
            //         data: [
            //         // {
            //         //   value: "Diff to previous version",
            //         //   href: "diff.html"
            //         // },
            //         {
            //           value: "Commit history",
            //           href: "https://github.com/w3c/wpub/commits/master"
            //         }]
            //       }
            //   ],
              localBiblio: biblio
          };
          // ]]>
      </script>
	</head>
	<body>
		<section id="abstract">
			<p>This specification defines a collection of information that describes the structure of Web Publications, so
				that user agents or developers may create user experiences well-suited to reading publications, such as
				sequential navigation and offline reading. This information includes the default reading order, a list of
				resources, and publication-wide metadata.</p>
		</section>
		<section id="sotd">
			<p>This first public working draft provides a preliminary outline of a Web Publication. Many details are under
				active consideration within the Publishing Working Group and are subject to change. The most prominent known
				issues have been identified in this document and links provided to comment on them.</p>

			<p>In particular, the Working Group seeks feedback on the following issues:</p>
			<ul>
				<li>...</li>
			</ul>
		</section>
		<section id="intro">
			<h2>Introduction</h2>

			<section id="why-wp" class="informative">
				<h3>Why Web Publications</h3>

				<p>The Web is a lonely place. It is unbounded: resources live out their lives on remote servers scattered
					across the globe, only reachable by addresses sometimes known to only a few people. But life on the Web
					is not all doom and gloom. Through the power of Web pages, these resources can be brought together to
					create amazing experiences.</p>

				<p>Web sites add another layer of relationship — this time between pages — but the relationship is a tenuous
					one that typically depends on hyperlinks to add cohesion. Without a user that understands how to follow
					the connections, a Web site is still no more than a loose coupling of information.</p>

				<p>The preceding is not a critique of the Web, but meant to highlight that the modern Web is very much an
					active, event-driven experience. Users follow the necessary paths to obtain the information they
					need.</p>

				<p>The traditional publishing model, sometimes called the print model, differs from the Web model in that the
					publisher packages all the information together and thereby establishes the common pathway through it.
					The user can passively follow the content page-by-page, or actively find other pathways via a table of
					contents or index. It is a model that has worked to bind information in a cohesive way for millenia, and
					continues to be an important model alongside the Web. The publication as a bounded edition, made public,
					is used to carry intellectual and artistic works of innumerable form: novels, plays, poetry, journals,
					magazines, newspapers, articles, laws, treatises, pamphlets, atlases, comics, manga, notebooks, memos,
					manuals, and albums of all sorts.</p>

				<p>Attempts to reproduce this model on the Web, however, have had to work around its loose coupling of
					information: sometimes publications are compressed into a single page; sometimes they are broken across
					multiple pages and hyperlinked together. These models both have flaws, however: single-page publications
					are often so large they render slowly, especially on low-power devices; mutli-page publications cannot be
					easily taken offline because their common thread cannot be established.</p>

				<p>As a result, users have had trouble accessing, compiling and downloading Web content for curation and
					personal use. That, in turn, has fed the continuing development of non-Web digital formats to redress
					these problems, and made it necessary to create both Web-ready content and alternative renditions for
					offline use.</p>

				<p>This specification aims to reduce these barriers and reinvigorate publishing by combining the best aspects
					of both models — the persistent availability and portability of bounded publications with the pervasive
					accessibility, addressability, and interconnectedness of the Open Web Platform. To do so, it adds an
					unobtrusive definition of interrelation to the Web model: the <a>Web Publication</a>.</p>
			</section>

			<section id="what-is-wp" class="informative">
				<h3>What is a Web Publication</h3>

				<p>A Web Publication is a discoverable and identifiable collection of information about a publication and its
					resources. This information is expressed in a machine-readable document called a <a>manifest</a>, which
					is what enables user agents to understand the bounds of the Web Publication and connection between its
					resources.</p>

				<p>The manifest includes metadata that describes the Web Publication, as it has an identity and nature beyond
					its constituent resources. The manifest also provides a list of all the resources that belong to the Web
					Publication and the default reading order, which is how it connects resources into a single contiguous
					work.</p>

				<p>A Web Publication is discoverable in one of two ways: resources either include a link to the manifest (via
					an HTTP Link header or an [[!html]] <code>link</code> element), or the manifest can be loaded directly by
					a compatible user agent.</p>

				<p>With the establishment of Web Publications, user agents can build new experiences tailored specifically
					for their unique reading needs.</p>
			</section>

			<section id="scope" class="informative">
				<h3>Scope</h3>

				<p>This specification only defines requirements for the production and rendering of valid <a>Web
						Publications</a>. As much as possible, it leverages existing Open Web Platform technologies to
					achieve its goal—that being to allow for a measure of boundedness on the Web without changing the way
					that the Web itself operates.</p>

				<p>Moreover, the specification is designed to adapt automatically to updates to Open Web Platform
					technologies in order to ensure that Web Publications continue to interoperate seamlessly as the Web
					evolves (e.g., by referencing the latest published versions instead of specific versions).</p>

				<p>Further, this specification does not attempt to constrain the nature of a Web Publication: any type of
					work that can be represented on the Web constitutes a potential Web Publication.</p>
			</section>

			<section id="terminology">
				<h3>Terminology</h3>

				<p>Wherever appropriate, this document relies on terminology defined by the note on "Publishing and Linking
					on the Web" [[!publishing-linking]], including, in particular, <a class="externalDFN"
						href="https://www.w3.org/TR/publishing-linking/#dfn-user">user</a>, <a class="externalDFN"
						href="https://www.w3.org/TR/publishing-linking/#dfn-user-agent">user agent</a>, <a
						class="externalDFN" href="https://www.w3.org/TR/publishing-linking/#dfn-browser">browser</a>, and <a
						class="externalDFN" href="https://www.w3.org/TR/publishing-linking/#dfn-address">address</a>.</p>

				<dl>
					<dt><dfn>Identifier</dfn></dt>
					<dd>
						<p>An identifier is metadata that can be used to refer to <a class="externalDFN"
								href="https://www.w3.org/TR/publishing-linking/#dfn-web-content">Web Content</a> in a
							persistent and unambiguous manner. URLs, URNs, DOIs, ISBNs, or PURLs are all examples of
							persistent identifiers frequently used in publishing.</p>
					</dd>

					<dt><dfn data-lt="Manifests">Manifest</dfn></dt>
					<dd>
						<p>A manifest represents structured information about a <a>Web Publication</a>, such as informative
							metadata, a <a href="#wp-resources">list of all resources</a>, and a <a>default reading
							order</a>.</p>
					</dd>

					<dt><dfn>Non-empty</dfn></dt>
					<dd>
						<p>For the purposes of this specification, non-empty is used to refer to an element, attribute or
							property whose text content or value consists of one or more characters after whitespace
							normalization, where whitespace normalization rules are defined per the host format.</p>
					</dd>

					<dt><dfn>URL</dfn></dt>
					<dd>
						<p>In this specification, the general term URL is used as in other W3C specifications like
							HTML&#160;[[!html]], and is defined by URL Standard of the WhatWG&#160;[[!url]]. In particular,
							such a URL allows for the usage of characters from Unicode following&#160;[[!rfc3987]]. See <a
								href="https://www.w3.org/TR/html/references.html#biblio-url">the note in the HTML5
								document</a> for further details.</p>
					</dd>

					<dt><dfn data-lt="Web Publications|Web Publication's">Web Publication</dfn></dt>
					<dd>
						<p>A Web Publication is a collection of one or more resources, organized together through a
								<a>manifest</a> into a single logical work with a <a>default reading order</a>. The Web
							Publication is uniquely identifiable and presentable using Open Web Platform technologies.</p>
					</dd>
				</dl>
			</section>
		</section>
		<section id="conformance">
			<section>
				<h2>Conformance Classes</h2>

				<p>This specification defines two conformance classes: one for <a>Web Publications</a> and one for user
					agents that process them.</p>

				<p id="wp-conformance">A Web Publication is conformant to this specification if it meets the following
					criteria:</p>

				<ul>
					<li>It MUST have a <a>manifest</a> that conforms to <a href="#manifest-req"></a>.</li>
				</ul>

				<p id="ua-conformance">A user agent is conformant to this specification if it meets the following
					criteria:</p>

				<ul>
					<li>It MUST be capable of generating a conforming <a href="#infoset">infoset</a> for a Web
						Publication.</li>
				</ul>
			</section>
		</section>
		<section id="infoset">
			<h2>Information Set</h2>

			<p class="ednote">The name "infoset" may change depending on feedback. Although this term has a different meaning
				for individuals familiar with XML, alternatives such as "properties" and "metadata" do not fully capture the
				nature or purpose. See <a href="https://github.com/w3c/wpub/issues/63">issue #63</a> for discussion.</p>

			<p class="ednote">As the serialization of the manifest remains an open issue, specifics about how properties are
				compiled into the infoset remain unspecified. This includes, but is not limited to, what specific names the
				properties will have in the infoset, whether the names in the manifest will be the same as those in the
				infoset and/or whether mappings to properties from known vocabularies will be used.</p>

			<section id="infoset-expl">
				<h3>Explanation</h3>

				<p>A Web Publication is defined by a set of properties known as its <dfn data-lt="infoset">information
						set</dfn> (infoset). The infoset is both abstract and concrete. It is abstract in the sense that it
					represents a set of information that a user agent has to be able to compile about the Web Publication,
					but it also becomes concrete when the user agent creates an internal representation of the
					information.</p>

				<p>The infoset does not require a specific serialization. It is primarily compiled from a Web Publication's
						<a>manifest</a>, whose serialization requirements are defined in <a href="#manifest-serialization"
					></a>. It is therefore possible to express the same infoset via different manifests, although a Web
					Publication will only have one manifest.</p>

				<p>Although the manifest is the primary source of the infoset, some information may be obtained independent
					of it. For example, fallback rules for properties defined in the following subsections allow a user agent
					to compile information that the author has not provided in the manifest, whether as an intentional
					optimization or by accidental omission.</p>
			</section>

			<section id="infoset-req">
				<h3>Requirements</h3>

				<p>The Web Publication <a>infoset</a> MUST include the following information:</p>

				<ul>
					<li>The <a href="#wp-address">address</a> of the Web Publication.</li>
					<li>The <a href="#wp-resources">Web Publication resources</a>.</li>
					<li>The <a href="#wp-default-reading-order">default reading order</a> of the Web Publication.</li>
				</ul>

				<p>In addition, the infoset SHOULD include the following information:</p>

				<ul>
					<li>The <a href="#wp-title">title</a> (or "name") of the Web Publication.</li>
					<li>The <a href="#wp-creators">creator(s)</a> of the Web Publication.</li>
					<li>The <a href="#wp-language">default (natural) language</a> of the Web Publication.</li>
					<li>A <a href="#wp-canonical-identifier">canonical identifier</a>.</li>
					<li>The <a href="#wp-table-of-contents">table of contents</a>.</li>
					<li>The <a href="#wp-pub-date">publication date</a>.</li>
					<li>The <a href="#wp-mod-date">modification date</a>.</li>
					<li><a href="#wp-a11y-meta">Accessibility metadata</a>.</li>
				</ul>

				<p class="ednote">These requirements reflect the current minimum consensus, though a number of issues remain
					open that could change whether an item is required or recommended. See the following sections for more
					information.</p>

				<p class="issue" data-number="21">Whether the minimum manifest must include any metadata, or a specific slot
					to handle metadata. (Note: this is now more specifically related to the infoset.)</p>
			</section>

			<section id="wp-title">
				<h3>Title</h3>

				<p>The title provides the human-readable name of the Web Publication.</p>

				<p>When specified in the manifest, the title MUST be <a>non-empty</a>.</p>

				<p>If a user agent requires a title and one is not available in the <a>infoset</a>, it MAY create one. This
					specification does not mandate how such a title is created. The user agent might:</p>

				<ul>
					<li>use the first <a>non-empty</a>
						<code>title</code> element found in the <a>default reading order</a>;</li>
					<li>provide a language-specific placeholder title (e.g., 'Untitled Publication');</li>
					<li>use the URL of the manifest;</li>
					<li>calculate a title using its own algorithm.</li>
				</ul>

				<div class="note">
					<p>A user agent is not expected to produce a <a
							href="https://www.w3.org/TR/WCAG20/#navigation-mechanisms-title">meaningful title</a> [[wcag20]]
						for a Web Publication when one is not specified.</p>
				</div>
			</section>

			<section id="wp-creators">
				<h3>Creators</h3>

				<p>Creators are the individuals or entities responsible for the creation of the Web Publication.</p>

				<p>The role the creator played in the creation of the Web Publication SHOULD also be specified (e.g.,
					'author', 'illustrator', 'translator').</p>
			</section>

			<section id="wp-language">
				<h3>Language</h3>

				<p>The language specified in the Web Publication's <a>infoset</a> identifies the natural language(s) of its
					content.</p>

				<p>This language is not used in the processing or rendering of the Web Publication (including the manifest),
					and is <strong>not</strong> a replacement for identifying the language of each resource as defined by its
					format. It instead allows a user agent to ability to provide supplementary enhancements, such as the
					ability to download a custom dictionary or the preload a language-specific text-to-speech module.</p>

				<p>When specified, the language MUST be a tag that conforms to [[!bcp47]].</p>

				<p>If a user agent requires the language and one is not available in the infoset, it MAY attempt to determine
					the language. This specification does not mandate how such a language tag is created. The user agent
					might:</p>

				<ul>
					<li>use the <a>non-empty</a> language declaration of the manifest;</li>
					<li>use the first non-empty language declaration found in the <a>default reading order</a>;</li>
					<li>calculate the language using its own algorithm.</li>
				</ul>

				<p>If a language tag cannot be determined, the value "<code>und</code>" (undetermined) MUST be used.</p>

				<div class="issue" data-number="53">
					<p>The question is whether the language declared for the manifest content is the same as the language of
						the publication, and how to deal with multilingual publications.</p>
				</div>
			</section>

			<section id="wp-canonical-identifier">
				<h3>Canonical Identifier</h3>

				<p>A <a>Web Publication's</a>
					<dfn>canonical identifier</dfn> is a unique identifier that resolves to the preferred version of the Web
					Publication. The canonical identifier SHOULD be an <a>address</a>, but, if not, it MUST be possible to
					make a one-to-one mapping to an address (e.g., a DOI can be resolved to a URL via a DOI resolver).</p>

				<p>If a Web Publication is hosted at more than one address, this identifier allows a user agent to identify
					the shared relationship between the versions and to determine which of the available addresses is
					primary.</p>

				<p>The canonical identifier is also intended to provide a measure of permanence above and beyond the Web
					Publication's address. Even if a Web Publication is permanently relocated to a new address, for example,
					the canonical identifier will provide a way of locating the new location (e.g., a DOI registry could be
					updated with the new URL, or a redirect could be added to the URL of the canonical identifier).</p>

				<p>When assigned, the canonical identifier needs to be unique to one and only one Web Publication,
					independent of its address(es). Ensuring uniqueness is outside the scope of this specification, however.
					The actual uniqueness achievable depends on such factors as the conventions of the identifier scheme used
					and the degree of control over assignment of identifiers.</p>

				<p class="note">If the canonical identifier is a URL, it can be used as the target of a "canonical"
					link&#160;[[rfc6596]] (e.g., an [[html]] <code>link</code> element whose <code>rel</code> attribute has
					the value <code>canonical</code> or a Link HTTP header field [[rfc5988]] similarly identified).</p>

				<p class="issue" data-number="58">The question is whether a canonical identifier is necessary to call out
					explicitly in the infoset, or whether it is/can be handled by other metadata.</p>
			</section>

			<section id="wp-address">
				<h3>Address</h3>

				<p>A Web Publication's <dfn>address</dfn> is a <a>URL</a> that refers to a <a>Web Publication</a> and enables
					the retrieval of a representation of the <a>manifest</a> of the Web Publication.</p>

				<p>The availability of this address does not preclude the creation and use of other identifiers and/or
					addresses to retrieve a representation of a <a>Web Publication</a> in whole or part.</p>

				<div class="note">The Web Publication's address can also be used as value for an identifier link relation
					[[link-relation]].</div>
			</section>

			<section id="wp-resources">
				<h3>Resources</h3>

				<p>The <a>infoset</a> MUST include a list of the Web Publication's resources, although the list is not
					required to be exhaustive. Resources in the <a>default reading order</a> MUST be included in this
					list.</p>

				<p class="issue" data-number="22">The discussion led to the question whether the manifest/infoset MUST list
					all resources or not. In this sense, this became a duplicate of <a
						href="https://github.com/w3c/wpub/issues/23">issue #23</a> ended up at the same question.</p>

				<p class="issue" data-number="23">The question is whether the manifest/infoset MUST list all resources or
					not.</p>

				<p class="issue" data-number="59">The question is whether the manifest MUST list resources in the default
					reading order or whether this can be inferred.</p>
			</section>

			<section id="wp-default-reading-order">
				<h3>Default Reading Order</h3>

				<p>The <dfn>default reading order</dfn> is a specific progression through a set of Web Publication
					resources.</p>

				<p>A user might follow alternative pathways through the content, but in the absence of such interaction the
					default reading order defines the expected progression from one resource to the next.</p>

				<p>The default reading order MUST include at least one resource.</p>

				<p>The default reading order is either specified directly in the manifest or a link is provided to an
					[[!html]] <code>nav</code> element whose list of links are processed to create one.</p>

				<p>The process for extracting a default reading order from a <code>nav</code> element are as follows:</p>

				<ol>
					<li>extract a list of resource paths referenced from the <code>href</code> attribute of all
							<code>a</code> elements;</li>
					<li>strip any fragment identifiers from the references;</li>
					<li>resolve all relative paths to full URLs;</li>
					<li>remove all consecutive references to the same resource, leaving only the first.</li>
				</ol>

				<p>If a user agent requires a default reading order and one is not provided in the <a>infoset</a>, it MAY
					attempt to construct one. This specification does not mandate how such a default reading order is
					created. The user agent might:</p>

				<ul>
					<li>use only the resource the user accessed to reach the manifest;</li>
					<li>search the list of resources for a <code>nav</code> element to use;</li>
					<li>calculate the default reading order using its own algorithm.</li>
				</ul>

				<p class="issue" data-number="35">Define the default reading order of a Web Publication to be the files
					referenced in the first</p>
				<p class="issue" data-number="39">There is a consensus that a Web Publication must have a reading order and
					must/should have a table of contents (the main navigation entry point).</p>
			</section>

			<section id="wp-table-of-contents">
				<h3>Table of Contents</h3>

				<p>The <dfn>table of contents</dfn> is a hierarchical list of links that reflects the structural outline of
					the major sections of the Web Publication. There are no requirements on the completeness of the table of
					contents, except that, when specified, it MUST link to at least one <a href="#wp-resources"
					>resource</a>.</p>

				<p>The table of contents is either specified directly in the manifest or a link is provided to an [[!html]]
						<code>nav</code> element containing one.</p>

				<p>If a user agent requires a table of contents and one is not specified, it MAY construct one. This
					specification does not mandate how such a table of contents is created. The user agent might: </p>

				<ol>
					<li>attempt to locate a table of contents in the default reading order (e.g., an HTML document with a
							<code>nav</code> element that has the <code>role</code> attribute value
						<code>doc-toc</code>);</li>
					<li>use the titles of resources in the default reading order;</li>
					<li>calculate a table of contents using its own algorithms.</li>
				</ol>

				<p class="issue" data-number="9">The question is whether the manifest/infoset needs to provide navigation, or
					whether such mechanisms belong in the content.</p>

				<p class="issue">This question arises only if this mechanism is accepted: the question is whether a table of
					contents navigation element can refer, via links, to any resource that is <em>not</em> listed in the
					default reading order.</p>

				<div class="issue">
					<p>The issue of using the HTML <code>nav</code> element as a possible encoding of the table of contents
						is mentioned or explicitly addressed in the following issues:</p>

					<ul>
						<li><a href="https://github.com/w3c/wpub/issues/35">Issue #35</a>: Define the resources in the
							default reading order of a Web Publication to be the files referenced in the first</li>
						<li><a href="https://github.com/w3c/wpub/issues/39">Issue #39</a>: There is a consensus that a Web
							Publication must have a reading order and must/should have a table of contents (the main
							navigation entry point).</li>
					</ul>
				</div>
			</section>

			<section id="wp-pub-date">
				<h3>Publication Date</h3>

				<p>The <dfn>publication date</dfn> is the date on which the Web Publication was originally published. It
					represents a static event in the lifecycle of a Web Publication and allows subsequent revisions to be
					identified and compared.</p>

				<p>The exact moment of publication is intentionally left open to interpretation: it could be when the Web
					Publication is first made available online, or could be a point in time before publication when the Web
					Publication is considered final.</p>
			</section>

			<section id="wp-mod-date">
				<h3>Last Modification Date</h3>

				<p>The <dfn>last modification date</dfn> is the date when the Web Publication was last updated.</p>

				<p>The last modification date SHOULD be updated whenever changes are made to the resources of the Web
					Publication, including the manifest. It does not necessarily reflect all changes to the Web Publication,
					however, as, for example, it might not reflect changes to third-party content.</p>
			</section>

			<section id="wp-a11y-metadata">
				<h3>Accessibility Metadata</h3>

				<p>Accessibility metadata allows discovery of features and affordances of the Web Publication that enable its
					usability by users with specific reading requirements and needs.</p>
			</section>

			<section id="wp-extensibility">
				<h3>Extensibility</h3>

				<p>The infoset is designed to provide a basic set of properties for use by user agents in presenting and
					rendering a Web Publication. It MAY be extended in the following ways:</p>

				<ol>
					<li>through the inclusion of additional properties in the manifest;</li>
					<li>by the provision of <a href="#manifest-linking-from">linked</a> metadata records.</li>
				</ol>

				<p>User Agents MAY support additional properties but MUST NOT include unrecognized properties in the infoset.
					The use of linked records is RECOMMENDED whenever possible, as the use of native formats standardizes and
					simplifies processing by user agents.</p>
			</section>
		</section>
		<section id="manifest">
			<h2>Manifest</h2>

			<section id="manifest-intro" class="informative">
				<h3>Overview</h3>

				<p>A <a>manifest</a> is a specific serialization of a <a>Web Publication's</a>
					<a>infoset</a>.</p>
			</section>

			<section id="manifest-req">
				<h3>Requirements</h3>

				<p>The requirements for a conforming Web Publication manifest are as follows:</p>

				<ol>
					<li>It MUST <a href="#manifest-declaration">declare</a> that it describes a Web Publication.</li>
					<li>It MUST be serialized as defined in <a href="#manifest-serialization"></a>.</li>
				</ol>
			</section>

			<section id="manifest-declaration">
				<h3>Declaration</h3>

				<div class="ednote">Placeholder for how a manifest declares it describes a web publication.</div>
			</section>

			<section id="manifest-serialization">
				<h3>Serialization</h3>

				<p class="issue" data-number="25"></p>
				<p class="issue" data-number="26">Should the table of contents be a separate HTML file or is the listing of
					resources in the default reading order an implicit table of contents?</p>
				<p class="issue" data-number="32"></p>
			</section>

			<section id="manifest-linking">
				<h2>Linking to a Manifest</h2>

				<p>Providing a link from a resource to its manifest allows a user agent to discover that a Web Publication is
					available. The inclusion of links is not always possible, however. For example, when the resource is
					hosted by a third party, or when access to modify HTTP headers is restricted.</p>

				<p>The inclusion of links from resources to their manifests is therefore RECOMMENDED.</p>

				<p>Links MUST take one or both of the following forms:</p>

				<ul>
					<li><p>An HTTP Link header field&#160;[[!rfc5988]] with its <code>rel</code> parameter set to the value
								"<code>publication</code>".</p>
						<pre class="example">Link: &lt;https://example.com/webpub/>; rel=publication</pre>
					</li>
					<li><p>An [[!html]] <code>link</code> element with its <code>rel</code> attribute set to the value
								"<code>publication</code>".</p>
						<pre class="example">&lt;link href="https://example.com/webpub/" rel="publication"/></pre>
					</li>
				</ul>

				<p>A user agent is only required to process the first <code>publication</code> link encountered, so a
					resource SHOULD NOT link to more than one Web Publication.</p>

				<p class="issue" data-number="13">If we have a collection of information about a web publication as a whole
					("manifest") that exists separately from most of the publication's resources, we need to find a way to
					associate the manifest with the other publication resources.</p>

				<p class="issue" data-number="32">How linking to a manifest is done may change depending on whether
					integration with [[appmanifest]] is feasible and beneficial. For a list of differences in linking
					approaches, refer to the <a href="https://github.com/w3c/wpub/wiki/Options-for-Processing-a-Manifest"
						>wiki analysis</a>.</p>

				<p class="issue" data-number="76"></p>
			</section>

			<section id="manifest-linking-from">
				<h3>Linking from a Manifest</h3>

				<p>The manifest serialization MUST provide a general linking mechanism for defining a relationship between
					the Web Publication and other resources on the Web as well as the type of those relationships.</p>

				<p>This mechanism is used in to express many parts of the Web Publication's infoset, including but not
					limited to:</p>

				<ul>
					<li><a href="#wp-canonical-identifier">Canonical identifier</a> using the <code>rel='canonical'</code>
						link relation.&#160;[[rfc6596]]</li>
					<li><a href="#wp-table-of-contents">Table of Contents</a> in the cases where the ToC is specified as a
						link to an HTML nav element.</li>
					<li><a href="#wp-metadata">External metadata</a> that may be expressed in established vocabularies such
						as ONIX, MARC, schema.org, or Dublin Core.</li>
				</ul>

				<p class="ednote">There are some overlaps between this list and, e.g., the separate section on canonical
					identifiers.</p>

				<p>This linking mechanism may also be used to express other common link structures on the open Web. For
					example:</p>

				<ul>
					<li>Distribution feeds such as <a href="http://opds-spec.org/specs/opds-catalog-1-1">OPDS</a> or <a
							href="https://tools.ietf.org/html/rfc4287">Atom</a>&#160;[[rfc4287]]</li>

					<li>Alternate versions of the publication</li>
					<li><a href="https://www.w3.org/TR/webmention/">Web Mentions</a>&#160;[[webmention]]</li>
				</ul>

				<p class="note">Some of these link structures, such as dynamic search links, may require support for <a
						href="https://tools.ietf.org/html/rfc6570">URI templates</a>&#160;[[rfc6570]] to be meaningfully
					useful in the context of a Web Publications. User agents should(?) support URI templates in order to make
					it easier for publishers to integrate dynamic server-side features into their publications with minimal
					coding and effort.</p>

				<p class="issue" data-number="67"></p>
			</section>
		</section>
		<section id="wp-lifecycle">
			<h2>Web Publication Lifecycle</h2>

			<div class="ednote">
				<p>The publishing working group is currently evaluating the best approach for implementing web publications
					in user agents. This note is intnded to provide an overview of where current thinking is and what issues
					are under consideration.</p>

				<p>The development of web publications is not viewed as a separate forking of the web, but an enhancement
					layer that can be supported by user agents. To that end, the primary constraints on any solution for web
					publications are that:</p>

				<ul>
					<li>the rendering of web publications must not interfere with the underlying web model and APIs. All
						functionality and enhancements must be layered on top.</li>
					<li>a web publication should not have to carry its own implementation code. Functionality is ideally
						provided by the user agent and/or polyfill.</li>
				</ul>

				<p>While this specification will provide implementation flexibility for user agents, there are still a number
					of areas that have been identified as potentially needing to be detailed. These include:</p>

				<ul>
					<li>
						<p>initialization expectations for a web publication:</p>
						<ul>
							<li>use agent initiation v. user prompts;</li>
							<li>linked v. directly loaded manifests;</li>
							<li>resources that belong to more than one web publication.</li>
						</ul>
					</li>
					<li>
						<p>the creation of a "publication state":</p>
						<ul>
							<li>persistence of publication information across page loads</li>
							<li>location and persistence of UI;</li>
							<li>indications of supported features;</li>
							<li>DOM issues such as persistence of numbering schemes.</li>
						</ul>
					</li>
					<li>
						<p>tracking the extent of a publication:</p>
						<ul>
							<li>taking an entire publication offline;</li>
							<li>enabling search across documents.</li>
						</ul>
					</li>
					<li>
						<p>establishing the bounds of a publication:</p>
						<ul>
							<li>when to end the publication state;</li>
							<li>document history traversal;</li>
							<li>how to handle links outside the publication.</li>
						</ul>
					</li>
					<li>updating of the manifest.</li>
				</ul>

				<p>The working group intends to flesh out the lifecycle in later revisions once it is clearer what models are
					viable and what solutions can be standardized. Input on the feasibility and challenges of these
					approaches is welcome at any time.</p>
			</div>
		</section>
		<section id="wp-enhancements">
			<h2>Reading Enhancements</h2>

			<p class="ednote">This section contains placholders for possible reading enhancements the UA may/should/must
				provide. The list is subject to addition, modification and removal as the enhancements get discussed in more
				detail.</p>

			<section id="enh-nav">
				<h3>Navigation</h3>

				<p class="issue" data-number="86"></p>

				<section id="enh-reading-order">
					<h4>Reading Order</h4>

					<p>Hyperlinks are the means by which multiple resources are linked together on the Web. When users reach
						the end of one resource, they have to activate a hyperlink to move to the next resource in the
						sequence. While this model of navigation is effective, it is also disruptive for immersive reading
						&#8212; it forces users to disengage from the content and perform the actions necessary to activate
						the links. It is also limited to media types that support hyperlinks.</p>

					<p>The <a>default reading order</a> provides an enhancement to the hyperlink model, allowing the user
						agent to automatically move the user to the next resource when a more natural action occurs, like a
						general swipe across the screen. It is similar conceptually and functionally to the [[!html]]
							<code>link</code> element's <code>next</code> and <code>prev</code> relationships.</p>

					<p class="issue" data-number="38">What is the interface for reading order navigation.</p>
				</section>

				<section id="enh-toc">
					<h4>Table of Contents</h4>

					<p>The table of contents is one of the key aids to navigating a publication, as it enables users to
						quickly move to the start of major sections. It is also a useful aid in understanding the overall
						structure and purpose of a publication (e.g., what topics are covered, where the user currently is in
						relation to the overall structure). Users often want quick access the table contents for these
						reasons.</p>

					<p>User agents can use table of contents defined in the infoset to present an interface that allows users
						to review and activate the links without leaving the resource they are currently viewing.</p>

					<p class="issue" data-number="9">Does the user agent need to provide access to the table of contents, or
						do such mechanisms belong in the content.</p>
				</section>
			</section>

			<section id="enh-offline-reading">
				<h3>Offline Reading</h3>

				<p class="ednote">Placeholder for offline reading of a publication.</p>
			</section>

			<section id="enh-search">
				<h3>Search</h3>

				<p class="ednote">Placeholder for inter-publication search.</p>
			</section>

			<section id="Layout">
				<h3>Layout</h3>

				<p>Since <a>web publications</a> may consist of many HTML documents considered as a logical whole, this does
					have implications for layout, as discussed below.</p>


				<p>The layout and rendering of <a>Web Publications</a> is governed by the usual rules that apply to all web
					content. [[!html]] documents are styled and laid out according to the rules of <a
						href="https://www.w3.org/TR/CSS/">CSS</a>, [[!svg]] files are rendered as normally expected of that
					format, and so on. This specification requires no particular profile or subset of CSS, HTML, or SVG to be
					supported, other than the expectations set for these technologies by their respective specifications.</p>


				<div class="note">
					<p>This specification intentionally refrains from introducing any new layout feature. Any shortcoming of
						the web platform in terms of layout needs to be addressed for the whole web platform, which means via
						CSS.</p>

					<p>This working group will work with other relevant groups of the W3C to address platform-wide
						limitations that negatively impacts <a>Web Publications</a>, and invites readers to do the same.</p>
				</div>

				<p>For the purposes of layout, each resource of a <a>Web Publication</a> is treated as a separate document.
					User Agents must not mix content from multiple resources in the same rendering: For instance, <a
						href="https://www.w3.org/TR/CSS21/visuren.html#floats">CSS floats</a> or <a
						href="https://www.w3.org/TR/CSS21/visuren.html#absolutely-positioned">Absolutely positioned
						elements</a> from one resource may not intrude or overlap with content from an other resource.</p>

				<div class="issue">
					<p>Despite this general requirement that each resource should be treated as a separate document for the
						purpose of layout, there are some places where CSS specifications should be amended to be able to
						deal more intelligently with collections of resources like <a>Web Publications</a>.</p>

					<p>One instance is the definition of <a href="https://drafts.csswg.org/css-content/#cross-references"
							>cross references</a> which are currently restricted to work only within a single document. This
						restriction should be relaxed to allow for cross references between separate resources of a single
							<a>Web Publication</a>.</p>

					<p>Another related one would be to allow <a
							href="https://drafts.csswg.org/css-lists-3/#counter-properties">counters</a> to accumulate across
						multiple resources of a single <a>Web Publication</a>, for instance so that figures in multiple
						sections may be numbered in a single sequance.</p>

				</div>

				<section id="scrolling-or-paginating" class="informative">
					<h4>Scrolling or Paginating</h4>
					<p>Publications have historically been presented via paged media. Web pages almost always scroll. As the
						preferences of individual readers vary, and as different types of publications may be better suited
						for one or the other, this specification encourages User Agents to support both, and to offer a
						choice to their users.</p>

					<div class="issue">
						<p>It may nonetheless be useful for authors to be able to specify a preference between scrolling and
							pagination, even if a strict requirement is not possible. This should most likely be addressed
							through an extension of <a href="https://www.w3.org/TR/css-device-adapt-1/#atviewport-rule"
									><code>@viewport</code></a> or of <a
								href="https://drafts.csswg.org/css-device-adapt/#viewport-meta">the viewport meta tag</a>(see
							[[css-device-adapt]]), or possibly through an extension of <a
								href="https://drafts.csswg.org/css-page-3/#at-page-rule"><code>@page</code></a> (See
							[[css-page-3]]). This should be discussed with the relevant working groups (<a
								href="https://www.w3.org/Style/CSS/">CSSWG</a>, <a href="https://www.w3.org/WebPlatform/WG/"
								>WebPlatformWG</a>, <a href="https://whatwg.org/">WHATWG</a>).</p>
					</div>
				</section>
				<section id="enh-pagination">
					<h4>Paginated Layout</h4>

					<p>When a User Agent renders a <a>Web Publication</a> in a paginated layout, it must lay out each
						document in the <a>default reading order</a> sequentially, with the last page of a resource being
						followed by the first page of the subsequent one.</p>

					<div class="issue">
						<p>To avoid having unstyleable blank pages in the middle of the document, if the preceding resource
							ended on a left page (resp. right page), the subsequent one should start on a right page (resp.
							left page) even if the <a href="https://drafts.csswg.org/css-page-3/#progression">page
								progression</a> (See [[!css-page-3]]) would otherwise lead to starting on the opposite page;
							It should also be possible to use the <a href="">break-before</a> property (See [[!css-break-3]])
							to force the content to resume on the opposite side if that was desired by the author.</p>

						<p>[[css-page-3] needs to be amended to describe this exception to the general behavior when dealing
							with collections of documents instead of individual documents.</p>
					</div>

					<div class="issue">
						<p>How is that supposed to work when subsequent resources have opposite <a
								href="https://drafts.csswg.org/css-page-3/#progression">page progression</a> (See
							[[!css-page-3]]) direction, for instance due to different a different writing mode? This is not
							necessarily a problem from a layout point of view, as each page is independent, but from an UI
							point of view, if swiping left means next page until the end of one chapter, and starts meaning
							previous page in the next chapter because we've switched from English to Hebrew, this is going to
							be horribly confusing.</p>
					</div>

					<div class="issue">
						<p>Should any of the above be normative, or should we leave this up to User Agents to explore, and
							only standardize if and when a clear winning approach emerges?</p>
					</div>

					<div class="issue">
						<p>[[css-page-3]] needs to be amended so that <a
								href="https://drafts.csswg.org/css-page-3/#page-based-counters">page counters</a> are not
							automatically reset to at the beginning of each new resource belonging to the same <a>Web
								Publication</a>.</p>
					</div>

				</section>
			</section>

			<section id="enh-locators" class="informative">
				<h3>Internal Locators</h3>

				<p>In addition to a Web Publication's address(es), bookmarking, annotation, and other use cases require
					internal locators which can be used to identify, locate, retrieve, and/or reference locations and content
					fragments within a Web Publication (cf. Web Publications Use Cases and Requirements [[pwp-ucr]] and
					Digital Publishing Annotation Use Cases [[dpub-annotation-uc]]). </p>

				<section id="enh-intrinsicLocators">
					<h4>Publisher-Provided Locators</h4>
					<p>In choosing to organize a publication into multiple, individually addressable resources, each with its
						own URL, the creator(s) of the publication provide locators for individual objects within the
						publication. Thus Web Publication Resource URLs serve as Web Publication internal locators for
						directly identifying, retrieving, and/or referencing each constituent resource of a Web Publication
						in its entirety. </p>

					<p>Within an individual Web Publication Resource, the creator of the resource may further provide anchors
						or other structures (e.g., the value of an <code>id</code> attribute of a <code>&lt;p&gt;</code>
						element in an HTML constituent resource, the Document Object Model (DOM) of an XML constituent
						resource) as a way to facilitate identifying, locating, retrieving, and/or referencing locations and
						more granular content fragments within that individual constituent resource and thereby within the
						Web Publication. Intra-resource, publisher-provided anchors and structures of this sort are often
						used to mint fragment identifiers and Web Publication Locators, as described below. </p>
				</section>

				<section id="enh-FragmentIds">
					<h4>Fragment Identifiers</h4>

					<p>The generic syntax for fragment identifiers is defined in RFC 3986 [[!rfc3986]]. The fragment
						identifier component of a URL comes at the end of the URL and is preceded by a <code>#</code>
						character. The fragment identifier component of a URL is separated prior to dereferencing and is not
						sent to the server. The identifying information within the fragment identifier component itself is
						dereferenced solely by the user agent. Interpretation and resolution of a fragment identifier may be
						dependent on the media-type of the resource retrieved when the preceding part of the URL is
						dereferenced. </p>

					<p>A broad range of fragment identifier formats, each specific to resources of one or more media-types,
						have been defined in various IETF RFCs, W3C Recommendations, etc. These are typically included by
						reference in IANA-registered media-type specifications [[iana-media-types]]. A fragment identifier of
						a format appropriate for a Web Publication Resource's media type may be used to identify, retrieve,
						and/or reference content fragments within that resource.</p>

					<div class="ednote">
						<p>Could reference or duplicate here with modifications the second table from 4.2.1 of Web Anno Data
							Model Rec. [[!annotation-model]].</p>
					</div>

					<p>User agents minting fragment identifiers often take advantage of publisher-provided anchors and
						structures. For example, the value of the <code>id</code> attribute of a <code>&lt;p&gt;</code>
						element in an HTML Web Publication Resource can be used to mint a fragment identifier linking to that
							<code>&lt;p&gt;</code> element (i.e., a paragraph). This type of fragment identifier is
						illustrated in Example 1 which assumes the existence within the HTML resource of an element with id
						p33, e.g., <code>&lt;p id="p33"&gt;</code>.</p>
					<div class="example">
						<div class="example-title marker">
							<span>Example 1</span>
							<span style="text-transform: none">: A simple fragment identifier</span>
						</div>
						<pre class="nohighlight" id="example1">https://dauwhe.github.io/html-first/HeatRadiation/OPS/s009-Chapter-001.html#p33</pre>
					</div>

					<p>Using other fragment identifier formats, user agents may mint fragment identifiers to serve as Web
						Publication internal locators even in the absence of any explicit publisher-provided anchor or
						structure. For example, a media fragment identifier [[!media-frags]] for a still image embedded in a
						Web Publication may be minted without reference to any publisher-provided anchor or structure, as
						shown in Example 2. In this example, the fragment is a rectangular image segment that is 200x150
						pixels with its upper left corner at 100 pixels in from the left edge and 500 pixels down from the
						top edge of the full image.</p>
					<div class="example">
						<div class="example-title marker">
							<span>Example 2</span>
							<span style="text-transform: none">: A media fragment identifier</span>
						</div>
						<pre class="nohighlight" id="example2">http://zebu.uoregon.edu/hudf/hudf_300dpi.jpg#xywh=100,500,200,150</pre>
					</div>
				</section>

				<section id="enh-wpLocators">
					<h4>Web Publication Locators</h4>

					<p>For some use cases it is essential to identify and reference a Web Publication Resource or a location
						in or a segment of a Web Publication Resource in the scope or context of a Web Publication which
						includes this resource. The fragment identifier approaches described above do not satisfy this
						requirement since only the URL of the constituent Web Publication Resource containing the location or
						content fragment of interest is expressed. Web Publication Locators address this issue by providing
						the means to express both the URL of the Web Publication Resource and the URL of the Web
						Publication.</p>

					<div class="ednote">
						<p>TO DO: Need to update title and insert here reference to this now separate document. Do we also
							need an informative reference here to EBPU CFI document?</p>
					</div>

					<div class="ednote">
						<p>TO DO: illustrate with example of simple, easy to understand Web Publication Locator such as might
							be used in annotating a simple Web Publication. More complicated examples can be left to the
							external "Locators for Web Publications" document.</p>
					</div>

					<p>The semantics of Web Publication Locators are a mapping and extension of the Web Annotation Data Model
						[[!annotation-model]] and Vocabulary [[!annotation-vocab]] for describing and referencing a segment
						of a web resource. As a result Web Publication Locators provide the expressiveness needed for a broad
						range of annotation and bookmarking use cases. Additionally Web Publication Locators provide a way to
						identify and reference a location within a Web Publication, i.e., as distinct from identifying and
						referencing a content fragment consisting of a span of characters or bytes. A Web Publication Locator
						can be used to identify, retrieve and/or reference a fragment of a Web Publication that spans
						multiple Web Publication Resources. </p>

					<div class="ednote">
						<p>The separate document will need to illustrate these use cases - i.e., identifying a location as
							disticnt from a fragment and identifying a fragment that spans multiple Web Publication
							Resources. If not, we'll need to illustrate here.</p>
					</div>
				</section>

				<div class="note">
					<p>In composing a Web Publication Locator, the canonical identifier of the Web Publication should be used
						in preference to any alternative addresses. This facilitates the collation of Web Publication
						Locators associated with a particular Web Publication. URLs of Web Publication Resources appearing in
						a Web Publication Locator should match the URL for of the Web Publication Resource provided in the
						Web Publication Infoset.</p>
				</div>

			</section>
		</section>
		<section id="security">
			<h2>Security</h2>

			<div class="ednote">Placeholder for security issues.</div>
		</section>
		<section id="privacy">
			<h2>Privacy</h2>

			<div class="ednote">Placeholder for privacy issues.</div>
		</section>
		<section id="ack" data-include="common/html/acknowledgements.html" data-include-replace="true"></section>
	</body>
</html>
